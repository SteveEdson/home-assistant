- id: coming_home
  alias: 'Coming home on weekdays'
  trigger:
    platform: time
    hours: 17
    minutes: 15
    seconds: 0
  condition:
    condition: and
    conditions:
      - condition: time
        weekday:
          - mon
          - tue
          - wed
          - thu
          - fri
      - condition: state
        entity_id: group.people
        state: not_home
  action:
    service: notify.html5
    data:
      title: "Turn the heating on?"
      message: >
        Turn the heating on? The house is currently {{ states('sensor.hive_current_temperature') }}°c
      data:
        actions:
          - action: html_turn_heating_on
            title: "Set to 19.5°c"
          - title: "No"
        tag: "coming-home-notification"

- id: html_turn_heating_on
  alias: Notification action - Turn heating on
  trigger:
    platform: event
    event_type: html5_notification.clicked
    event_data:
      action: html_turn_heating_on
  action:
    - service: climate.set_temperature
      data:
        entity_id: climate.hive_heating
        temperature: 19.5