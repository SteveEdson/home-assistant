gptitle: Edson Home
resources:
  - url: /local/custom_ui/card-tools.js?v=2.1
    type: js
  - url: /local/custom_ui/auto-entities.js?v=1.5
    type: js
  - url: /local/custom_ui/bar-card.js?v=2
    type: js
  - url: /local/custom_ui/mini-graph-card-bundle.js?v=0.5.0
    type: module
  - url: /local/custom_ui/mini-media-player-bundle.js?v=1.2.2
    type: module
  - url: /local/custom_ui/unused-card.js?v=0.2
    type: module
  - url: /local/custom_ui/simple-weather-card-bundle.js?v=0.5.0
    type: module
  - url: /local/custom_ui/slider-entity-row.js?v=8
    type: module
  - url: /local/custom_ui/gui-sandbox.js
    type: module
  - url: /local/custom_ui/plan-coordinates.js?v=2
    type: module
  - url: /local/custom_ui/xiaomi-vacuum-card.js?v=2.3.2
    type: js
  - url: /local/custom_ui/layout-card.js
    type: module
  - url: /local/custom_ui/bignumber-card.js
    type: module
  - url: /local/custom_ui/simple-thermostat.js?v=0.31
    type: module
  - url: https://cdn.jsdelivr.net/gh/bramkragten/custom-ui@master/swipe-card/swipe-card.js
    type: module
  - url: /local/custom_lovelace/xiaomi_vacuum_map_card/xiaomi-vacuum-map-card.js
    type: module

views:
  - icon: mdi:home-assistant
    path: home
    # Name of the view. Will be used as the tooltip for tab icon
    title: Home
    cards:
      - type: alarm-panel
        entity: alarm_control_panel.house_alarm
      - type: picture-glance
        title: Camera
        entities:
          - person.steve_edson
          - binary_sensor.door_window_sensor_158d0002253f18
        camera_image: camera.g3_flex
        camera_view: live
      # - type: thermostat
      #   entity: climate.netatmo_heating
      #   name: Heating
      - type: custom:simple-thermostat
        entity: climate.netatmo_heating
        name: Heating
      - type: entities
        title: Doorbell
        show_header_toggle: false
        entities:
          - entity: switch.doorbell_chime_active
            name: Chime Active?
          - entity: switch.doorbell_chime
            name: Manual Press
      - type: glance
        entities:
          - entity: script.good_night
          - entity: script.find_phone
          - entity: script.play_radio_in_kitchen
          - entity: script.clean_kitchen
        show_state: false
        title: Quick Scripts
        columns: 2
#      - type: map
#        aspect_ratio: 16:9
#        default_zoom: 16
#        entities:
#          - device_tracker.steveedson_oneplus5t

  - icon: mdi:stairs
    path: hallway
    badges:
      - binary_sensor.door_window_sensor_158d00035c0b6e
    # Name of the view. Will be used as the tooltip for tab icon
    title: Hallway
    cards:
      - type: light
        entity: light.shelly_a
      - type: picture-elements
        image: /local/nest.jpg
        elements:
          - type: state-icon
            entity: sensor.living_room_nest_protect_battery_health
            style:
              top: 50%
              left: 30%
          - type: state-icon
            entity: sensor.living_room_nest_protect_co_status
            style:
              top: 50%
              left: 40%
          - type: state-icon
            entity: binary_sensor.living_room_nest_protect_online
            style:
              top: 50%
              left: 50%
          - type: state-icon
            entity: sensor.living_room_nest_protect_smoke_status
            style:
              top: 50%
              left: 60%
          - type: state-icon
            entity: sensor.living_room_nest_protect_color_status
            style:
              top: 50%
              left: 70%
      - type: entity-button
        entity: script.find_phone
        tap_action:
          action: call-service
          service: script.find_phone

  - icon: mdi:baby-face-outline
    title: Nursery
    path: nursery
    cards:
      - type: history-graph
        entities:
          - entity: switch.bff5c4bbd438ed9847uxkj
        hours_to_show: 6
        title: Bottle History
        refresh_interval: 60
      - type: entities
        entities:
          - entity: script.bottle_warmer_on
        show_header_toggle: false
      - type: horizontal-stack
        cards:
          - entity: script.log_feed
            name: Log 1oz Bottle
            type: button
            tap_action:
              action: call-service
              service: script.turn_on
              service_data:
                entity_id: script.log_feed
                data:
                  bottle_size: 1
                  time: "{{ as_timestamp(now()) | timestamp_custom('%a, %b %d at %I:%M %p') }}"
            show_icon: true
            show_name: true
            state_color: true
          - entity: script.log_feed
            name: Log 2oz Bottle
            type: button
            tap_action:
              action: call-service
              service: script.turn_on
              service_data:
                entity_id: script.log_feed
                data:
                  bottle_size: 2
                  time: "{{ as_timestamp(now()) | timestamp_custom('%a, %b %d at %I:%M %p') }}"
            show_icon: true
            show_name: true
            state_color: true
          - entity: script.log_feed
            name: Log 3oz Bottle
            type: button
            tap_action:
              action: call-service
              service: script.turn_on
              service_data:
                entity_id: script.log_feed
                data:
                  bottle_size: 3
                  time: "{{ as_timestamp(now()) | timestamp_custom('%a, %b %d at %I:%M %p') }}"
            show_icon: true
            show_name: true
            state_color: true

  - icon: mdi:sofa
    title: Lounge
    path: lounge
    cards:
      - type: plant-status
        entity: plant.sunflower
        name: Lounge Plant

      - type: vertical-stack
        cards:
          - type: custom:mini-media-player
            entity: media_player.lounge_tv
            icon: mdi:television
            artwork: cover
            hide:
              volume: false
              source: true
              power_state: false

          - type: custom:mini-media-player
            entity: media_player.samsung_lounge_tv
            icon: mdi:television
            artwork: cover
            hide:
              volume: true
              source: true
              power_state: false

          - type: custom:mini-media-player
            entity: media_player.playstation_4
            icon: mdi:playstation
            artwork: cover
            hide:
              volume: true
              source: true
              power_state: false
              controls: true

      - type: glance
        entities:
          - entity: switch.32002710bcddc226b4b0
            tap_action:
              action: toggle
          - entity: switch.bf4cadf5e3e38fddf078v2
            tap_action:
              action: toggle
          - entity: switch.bf0b57d12c6b4b8272vkpj
            tap_action:
              action: toggle
        show_state: false

      - type: glance
        show_state: false
        entities:
          - entity: scene.bright
            tap_action:
              action: call-service
              service: scene.turn_on
              service_data:
                entity_id: scene.bright

          - entity: scene.deep_blue
            tap_action:
              action: call-service
              service: scene.turn_on
              service_data:
                entity_id: scene.deep_blue

          - entity: scene.ocean
            tap_action:
              action: call-service
              service: scene.turn_on
              service_data:
                entity_id: scene.ocean

          - entity: scene.lounge_lights_off
            name: Lights Off
            tap_action:
              action: call-service
              service: scene.turn_on
              service_data:
                entity_id: scene.lounge_lights_off

      - type: entities
        entities:
          - type: custom:slider-entity-row
            entity: light.twigs
            toggle: true
          - type: custom:slider-entity-row
            entity: light.lounge_tall_lamp

  - icon: mdi:toggle-switch
    title: Active Devices
    path: active
    cards:
      - type: custom:auto-entities
        card:
          type: entities
          title: Active Devices
        filter:
          include:
            - state: "on"
              domain: /light|switch/
            - state: "playing"
              domain: /media_player/
          exclude:
            - entity_id: "*doorbell*"
            - entity_id: "media_player.bedroom_tv"

  - icon: mdi:kettle
    title: Kitchen
    path: kitchen
    badges:
      - binary_sensor.door_window_sensor_158d00035c0c9a
    cards:
      - type: custom:xiaomi-vacuum-card
        entity: vacuum.xiaomi_vacuum_cleaner
        image: /local/vacuum.png
        name: false
        buttons: true

      - type: custom:xiaomi-vacuum-map-card
        entity: vacuum.xiaomi_vacuum_cleaner
        map_image: '/local/custom_lovelace/xiaomi_vacuum_map_card/map.jpeg'
        debug: false
        default_mode: predefined_zones
        calibration_points:
          - vacuum:
              x: 25550
              y: 25250
            map:
              x: 615
              y: 495
          - vacuum:
              x: 25550
              y: 26400
            map:
              x: 615
              y: 400
          - vacuum:
              x: 29550
              y: 26400
            map:
              x: 922
              y: 400
        zones:
          - [[23199,24008,29749,28808], [29654,26405,31454,28355]]
          - [[29684,23319,33034,25969]]
          - [[25083,19323,31833,23373]]

      - type: entities
        entities:
          - light.shelly_b
          - light.shelly_c
        title: Lights
        show_header_toggle: true

      - type: entities
        title: Motion Controls
        entities:
          - entity: automation.kitchen_motion
          - entity: automation.kitchen_motion_after_2130
        show_header_toggle: true

      - type: entities
        entities:
          - light.table_light_1
          - light.table_light_2
          - light.table_light_3
        title: Table Lights
        show_header_toggle: true

      - type: glance
        show_state: false
        entities:
        - entity: scene.table_pink_and_blue
          tap_action:
            action: call-service
            service: scene.turn_on
            service_data:
              entity_id: scene.table_pink_and_blue
        - entity: scene.table_bright
          tap_action:
            action: call-service
            service: scene.turn_on
            service_data:
              entity_id: scene.table_bright

      - type: entities
        entities:
          - sensor.bin_days

      - type: custom:mini-graph-card
        entities:
          - sensor.house_temperature
          - sensor.dark_sky_apparent_temperature

      - type: vertical-stack
        cards:
          - type: custom:mini-media-player
            entity: media_player.downstairs
            icon: mdi:spotify
            artwork: cover
            hide:
              volume: false
              source: true
              power_state: false
            shortcuts:
              columns: 4 # Max buttons per row
              buttons:
                # Start predefined playlist
                - icon: mdi:radio
                  type: script
                  id: script.play_radio_in_kitchen

          - type: custom:mini-media-player
            entity: media_player.kitchen_max
            icon: mdi:spotify
            artwork: cover
            hide:
              volume: true
              source: true
              power_state: false

          - type: custom:mini-media-player
            entity: media_player.kitchen_display
            icon: mdi:spotify
            artwork: cover
            hide:
              volume: true
              source: true
              power_state: false

      - type: custom:mini-media-player
        entity: media_player.kitchen_tv
        icon: mdi:television
        artwork: cover
        hide:
          volume: true
          source: true
          power_state: false

      - type: thermostat
        entity: climate.netatmo_heating
        name: Heating

  - path: outside
    icon: mdi:tree
    title: Outside
    cards:
      - type: entities
        entities:
          - sensor.bin_days
          - sensor.next_bus_to_town
      - type: picture-glance
        title: Camera

        entities:
          - person.steve_edson
        camera_image: camera.g3_flex
        camera_view: live
      - type: custom:simple-weather-card
        entity: weather.dark_sky
        name: "at home"
        backdrop: true
#      - type: glance
#        entities:
#          - entity: switch.bf5bde9e7cf9134ab6kmf7
#            tap_action:
#              action: toggle
#        show_state: false
# todo: add hot tub temp eventually

  - path: bedroom
    icon: mdi:hotel
    title: Bedroom
    cards:
      - type: glance
        show_state: false
        columns: 2
        entities:
          - entity: scene.bedroom_reading
            name: Reading
            tap_action:
              action: call-service
              service: scene.turn_on
              service_data:
                entity_id: scene.bedroom_reading

          - entity: scene.bedroom_steve_reading
            name: Steve Reading
            tap_action:
              action: call-service
              service: scene.turn_on
              service_data:
                entity_id: scene.bedroom_steve_reading

          - entity: scene.bedroom_sophie_reading
            name: Sophie Reading
            tap_action:
              action: call-service
              service: scene.turn_on
              service_data:
                entity_id: scene.bedroom_sophie_reading

          - entity: scene.bedroom_off
            name: "Off"
            tap_action:
              action: call-service
              service: scene.turn_on
              service_data:
                entity_id: scene.bedroom_off

      - type: entities
        entities:
          - switch.bedroom_tv
          - sensor.bedroom_tv_media_input_source
          - sensor.bedroom_tv_media_playback_status
          - sensor.bedroom_tv_tv_channel
          - sensor.bedroom_tv_volume

      - type: glance
        show_state: false
        columns: 3
        entities:
          - name: Sleep Timer 30m
            entity: timer.bedroom_sleep_timer
            icon: 'mdi:sleep'
            tap_action:
              action: call-service
              service: timer.start
              service_data:
                entity_id: timer.bedroom_sleep_timer
                duration: '00:30:00'
            hold_action:
              action: more-info
            show_icon: true
            show_name: true
          - name: Sleep Timer 45m
            entity: timer.bedroom_sleep_timer
            icon: 'mdi:sleep'
            tap_action:
              action: call-service
              service: timer.start
              service_data:
                entity_id: timer.bedroom_sleep_timer
                duration: '00:45:00'
            hold_action:
              action: more-info
            show_icon: true
            show_name: true
          - name: Sleep Timer 60m
            entity: timer.bedroom_sleep_timer
            icon: 'mdi:sleep'
            tap_action:
              action: call-service
              service: timer.start
              service_data:
                entity_id: timer.bedroom_sleep_timer
                duration: '00:60:00'
            hold_action:
              action: more-info
            show_icon: true
            show_name: true

      - type: entities
        entities:
          - type: custom:slider-entity-row
            entity: light.bedroom_spotlights
            toggle: true
          - type: custom:slider-entity-row
            entity: light.bedroom_reading_lights
            toggle: true
          - type: custom:slider-entity-row
            entity: light.yeelight_bslamp1_7c49eb28d971
            toggle: true
          - light.shelly_e
      - type: custom:mini-media-player
        entity: media_player.bedroom_tv
        icon: mdi:television
        artwork: cover
        hide:
          volume: false
          source: false
          power_state: false

      - type: glance
        entities:
          - entity: timer.bedroom_sleep_timer
            tap_action:
              action: call-service
              service: timer.start
              service_data:
                entity_id: timer.bedroom_sleep_timer
            hold_action:
              action: more-info
        title: TV Sleep Timer
        show_name: false
        show_state: true
        show_icon: true

      - type: custom:mini-media-player
        entity: media_player.bedroom_speaker
        icon: mdi:spotify
        artwork: cover
        hide:
          volume: false
          source: true
          power_state: true
#        shortcuts:
#          columns: 4 # Max buttons per row
#          buttons:
#            # Start predefined playlist
#            - icon: mdi:radio
#              type: script
#              id: script.play_radio_in_office

  - icon: mdi:office-building
    path: homeoffice
    cards:
      - type: custom:mini-media-player
        entity: media_player.home_office_speaker
        icon: mdi:spotify
        artwork: cover
        hide:
          volume: false
          source: true
          power_state: true
        shortcuts:
          columns: 4 # Max buttons per row
          buttons:
            # Start predefined playlist
            - icon: mdi:radio
              type: script
              id: script.play_radio_in_office
      - type: custom:mini-media-player
        entity: media_player.home_office_tv
        artwork: cover
        hide:
          volume: true
          source: true
          power_state: true
      - type: thermostat
        entity: climate.home_office
      - type: custom:simple-thermostat
        entity: climate.home_office
        name: Heating

  - icon: mdi:music-box
    path: media
    title: Media
    panel: true
    cards:
      - type: custom:auto-entities
        max_columns: 3
        filter:
          include:
            - domain: media_player
              options:
                type: custom:mini-media-player # Make sure to specify a card type for every filter
        sort:
          method: name
          ignore_case: true
        card:
          type: custom:layout-card

  - path: office
    title: Office
    icon: mdi:google-controller
    cards:
      - type: entity-button
        entity: switch.aegis
      - type: entities
        entities:
          - sensor.steam_76561198059721761
        title: Steam
        show_header_toggle: false

  - path: Unused
    title: Unused
    cards:
      - type: custom:gui-sandbox
      - type: custom:unused-card

  - path: system
    title: System
    cards:
      - type: entities
        entities:
          - sensor.speedtest_download
          - sensor.speedtest_ping
          - sensor.speedtest_upload
          - binary_sensor.do_1
          - sensor.rt_ac68u_bytes_received
          - sensor.rt_ac68u_bytes_sent
          - sensor.rt_ac68u_kbyte_sec_received
          - sensor.rt_ac68u_kbyte_sec_sent
          - sensor.rt_ac68u_packets_received
          - sensor.rt_ac68u_packets_sent
          - sensor.rt_ac68u_packets_sec_received
          - sensor.rt_ac68u_packets_sec_sent
        title: Network Stats
        show_header_toggle: false
      - type: entities
        entities:
          - sensor.disk_free
          - sensor.load_5m
          - sensor.memory_free
          - sensor.latest_version
          - sensor.current_version
        title: Home Assistant
        show_header_toggle: false
      - type: custom:auto-entities
        unique: true
        show_empty: false
        card:
          type: custom:bar-card
          severity:
            - value: 50
              color: '#bf4040'
            - value: 75
              color: '#bf9540'
            - value: 100
              color: '#40bf40'
          title_position: inside
          columns: 3
          padding: 2px
          align: left
          title_style:
            font-size: 16px
          value_style:
            font-size: 8px
        filter:
          include:
            - entity_id: "*_battery"

      - type: custom:auto-entities
        show_empty: false
        unique: true
        card:
          type: custom:bar-card
          attribute: battery
          unit_of_measurement: "%"
          severity:
            - value: 50
              color: '#bf4040'
            - value: 75
              color: '#bf9540'
            - value: 100
              color: '#40bf40'
          title_position: inside
          padding: 2px
          columns: 2
        filter:
          include:
            - attributes:
                battery: "<=100"
          exclude:
            - entity_id: "*_humidity"
            - entity_id: "*_pressure"
            - entity_id: "*_battery"

      - type: custom:auto-entities
        unique: true
        show_empty: false
        card:
          type: custom:bar-card
          attribute: battery_level
          unit_of_measurement: "%"
          severity:
            - value: 50
              color: '#bf4040'
            - value: 75
              color: '#bf9540'
            - value: 100
              color: '#40bf40'
          title_position: inside
          padding: 2px
          columns: 2
        filter:
          include:
            - attributes:
                battery_level: "<=100"
          exclude:
            - entity_id: "*_humidity"
            - entity_id: "*_pressure"
            - entity_id: "*_battery"

  - path: printing
    title: Printing
    icon: mdi:printer-3d-nozzle
    cards:
      - type: picture-entity
        entity: camera.octoprint
        name: printcam
        show_state: false
        camera_view: live
        tap_action:
          action: more-info

      - type: horizontal-stack
        cards:
          - type: custom:mini-graph-card
            hours_to_show: 2
            entities:
              - sensor.octoprint_actual_bed_temp
              - sensor.octoprint_target_bed_temp
          - type: custom:mini-graph-card
            hours_to_show: 2
            entities:
              - sensor.octoprint_actual_tool0_temp
              - sensor.octoprint_target_tool0_temp

      - type: horizontal-stack
        cards:
          - type: gauge
            title: Bed Temp
            entity: sensor.octoprint_actual_bed_temp
            unit_of_measurement: °C
            min: 0
            max: 80
            severity:
              red: 70
              amber: 0
              green: 60
            #scale: '50px'

          - type: gauge
            title: Hot End Temp
            entity: sensor.octoprint_actual_tool0_temp
            unit_of_measurement: °C
            min: 0
            max: 260
            severity:
              red: 225
              amber: 0
              green: 200
            #scale: '50px'

      - type: horizontal-stack
        cards:
          - type: gauge
            title: Bed Target
            entity: sensor.octoprint_target_bed_temp
            unit_of_measurement: °C
            min: 0
            max: 150
            severity:
              red: 120
              amber: 0
              green: 59
            #scale: '50px'

          - type: gauge
            title: Hot End Target
            entity: sensor.octoprint_target_tool0_temp
            unit_of_measurement: °C
            min: 0
            max: 260
            severity:
              red: 225
              amber: 0
              green: 199
                        #scale: '50px'

      - type: custom:bignumber-card
        title: Current Job Completion Status
        entity: sensor.octoprint_job_percentage
        scale: 30px
        from: left
        min: 0
        max: 100
        severity:
          - value: 20
            style: 'var(--label-badge-red)'
          - value: 40
            style: 'var(--label-badge-yellow)'
          - value: 70
            style: 'var(--label-badge-green)'

      - type: horizontal-stack
        cards:
          - type: sensor
            name: Elapsed
            entity: sensor.octoprint_time_elapsed
            graph: none

          - type: sensor
            name: Remaining
            entity: sensor.octoprint_time_remaining
            graph: none

      - type: glance
        show_header_toggle: false
        column_width: calc(100% / 3)
        entities:
          - entity: binary_sensor.octoprint_printing
            name: Printing Status
            icon: mdi:printer-wireless
          - entity: binary_sensor.octoprint_printing_error
            name:  Error State
            icon: mdi:printer-alert
          - entity: sensor.octoprint_current_state
            name: Current Status
